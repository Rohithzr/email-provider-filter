<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Email Provider Filter - Domain Lookup</title>
<style>
  /* shadcn zinc palette */
  :root, [data-theme="light"] {
    --background: #ffffff;
    --foreground: #09090b;
    --card: #ffffff;
    --card-foreground: #09090b;
    --muted: #f4f4f5;
    --muted-foreground: #71717a;
    --border: #e4e4e7;
    --input: #e4e4e7;
    --primary: #18181b;
    --primary-foreground: #fafafa;
    --secondary: #f4f4f5;
    --secondary-foreground: #18181b;
    --accent: #f4f4f5;
    --ring: #a1a1aa;
    --radius: 8px;
    --shadow-sm: 0 1px 2px 0 rgba(0,0,0,0.05);
    --shadow: 0 1px 3px 0 rgba(0,0,0,0.1), 0 1px 2px -1px rgba(0,0,0,0.1);
    --badge-disposable-bg: #fef2f2; --badge-disposable-text: #991b1b; --badge-disposable-border: #fecaca;
    --badge-free-bg: #f0fdf4; --badge-free-text: #166534; --badge-free-border: #bbf7d0;
    --badge-paid-bg: #fffbeb; --badge-paid-text: #92400e; --badge-paid-border: #fde68a;
    --badge-business-bg: #eff6ff; --badge-business-text: #1e40af; --badge-business-border: #bfdbfe;
    --code-bg: #18181b; --code-text: #fafafa; --code-muted: #a1a1aa; --code-border: #27272a;
    --code-copy-bg: #27272a; --code-copy-hover: #3f3f46;
  }
  [data-theme="dark"] {
    --background: #09090b;
    --foreground: #fafafa;
    --card: #0a0a0c;
    --card-foreground: #fafafa;
    --muted: #18181b;
    --muted-foreground: #a1a1aa;
    --border: #27272a;
    --input: #27272a;
    --primary: #fafafa;
    --primary-foreground: #18181b;
    --secondary: #27272a;
    --secondary-foreground: #fafafa;
    --accent: #27272a;
    --ring: #52525b;
    --shadow-sm: 0 1px 2px 0 rgba(0,0,0,0.3);
    --shadow: 0 1px 3px 0 rgba(0,0,0,0.4), 0 1px 2px -1px rgba(0,0,0,0.3);
    --badge-disposable-bg: #450a0a; --badge-disposable-text: #fca5a5; --badge-disposable-border: #7f1d1d;
    --badge-free-bg: #052e16; --badge-free-text: #86efac; --badge-free-border: #166534;
    --badge-paid-bg: #451a03; --badge-paid-text: #fcd34d; --badge-paid-border: #92400e;
    --badge-business-bg: #172554; --badge-business-text: #93c5fd; --badge-business-border: #1e40af;
    --code-bg: #0a0a0c; --code-text: #fafafa; --code-muted: #71717a; --code-border: #27272a;
    --code-copy-bg: #18181b; --code-copy-hover: #27272a;
  }

  *, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Inter', Roboto, sans-serif;
    background: var(--background);
    color: var(--foreground);
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    transition: background 0.15s, color 0.15s;
    -webkit-font-smoothing: antialiased;
  }

  .page { flex: 1; display: flex; flex-direction: column; }

  /* Nav */
  .nav {
    border-bottom: 1px solid var(--border);
    padding: 0.75rem 1.5rem;
    display: flex;
    align-items: center;
    justify-content: space-between;
    position: sticky;
    top: 0;
    background: var(--background);
    z-index: 50;
    transition: background 0.15s, border-color 0.15s;
  }
  .nav-brand {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-weight: 600;
    font-size: 0.9rem;
    text-decoration: none;
    color: var(--foreground);
  }
  .nav-brand svg { width: 20px; height: 20px; }
  .nav-right { display: flex; align-items: center; gap: 0.5rem; }
  .nav-link {
    font-size: 0.8rem;
    color: var(--muted-foreground);
    text-decoration: none;
    padding: 0.35rem 0.65rem;
    border-radius: var(--radius);
    transition: color 0.15s, background 0.15s;
  }
  .nav-link:hover { color: var(--foreground); background: var(--accent); }
  .theme-btn {
    width: 32px;
    height: 32px;
    display: flex;
    align-items: center;
    justify-content: center;
    border: 1px solid var(--border);
    border-radius: var(--radius);
    background: transparent;
    cursor: pointer;
    color: var(--muted-foreground);
    transition: color 0.15s, background 0.15s, border-color 0.15s;
  }
  .theme-btn:hover { color: var(--foreground); background: var(--accent); }
  .theme-btn svg { width: 16px; height: 16px; }
  [data-theme="light"] .icon-sun { display: none; }
  [data-theme="dark"] .icon-moon { display: none; }

  /* Main */
  .main {
    max-width: 960px;
    width: 100%;
    margin: 0 auto;
    padding: 2rem 1.5rem;
    flex: 1;
  }

  /* Hero */
  .hero { text-align: center; margin-bottom: 1.75rem; }
  .hero h1 { font-size: 2rem; font-weight: 700; letter-spacing: -0.025em; margin-bottom: 0.35rem; }
  .hero p { color: var(--muted-foreground); font-size: 0.95rem; }

  /* Search */
  .search-wrap { position: relative; margin-bottom: 1.25rem; max-width: 560px; margin-left: auto; margin-right: auto; }
  .search-wrap svg {
    position: absolute; left: 14px; top: 50%; transform: translateY(-50%);
    width: 16px; height: 16px; color: var(--muted-foreground); pointer-events: none;
  }
  .search-input {
    width: 100%;
    height: 40px;
    padding: 0 0.85rem 0 2.5rem;
    font-size: 0.875rem;
    border: 1px solid var(--input);
    border-radius: var(--radius);
    background: transparent;
    color: var(--foreground);
    outline: none;
    transition: border-color 0.15s, box-shadow 0.15s;
    font-family: inherit;
  }
  .search-input::placeholder { color: var(--muted-foreground); }
  .search-input:focus { border-color: var(--ring); box-shadow: 0 0 0 2px var(--background), 0 0 0 4px var(--ring); }

  /* Result - inline compact */
  .result {
    max-width: 560px;
    margin: 0 auto 1.75rem;
    display: none;
    animation: slideDown 0.15s ease-out;
  }
  @keyframes slideDown { from { opacity: 0; transform: translateY(-4px); } to { opacity: 1; transform: translateY(0); } }
  .result.visible { display: block; }
  .result-card {
    border: 1px solid var(--border);
    border-radius: var(--radius);
    padding: 0.85rem 1rem;
    background: var(--card);
    box-shadow: var(--shadow-sm);
    display: flex;
    align-items: center;
    gap: 0.75rem;
    flex-wrap: wrap;
    transition: background 0.15s, border-color 0.15s;
  }
  .result-icon {
    width: 36px; height: 36px; border-radius: 8px;
    display: none; object-fit: contain; flex-shrink: 0;
    border: 1px solid var(--border);
  }
  .result-icon.loaded { display: block; }
  .result-info { flex: 1; min-width: 0; }
  .result-domain { font-size: 0.9rem; font-weight: 600; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
  .result-company { font-size: 0.75rem; color: var(--muted-foreground); }
  .result-badge {
    display: inline-flex; align-items: center;
    padding: 0.15rem 0.55rem; border-radius: 999px;
    font-size: 0.7rem; font-weight: 500;
    border: 1px solid;
    white-space: nowrap;
  }
  .badge-disposable { background: var(--badge-disposable-bg); color: var(--badge-disposable-text); border-color: var(--badge-disposable-border); }
  .badge-free { background: var(--badge-free-bg); color: var(--badge-free-text); border-color: var(--badge-free-border); }
  .badge-paid { background: var(--badge-paid-bg); color: var(--badge-paid-text); border-color: var(--badge-paid-border); }
  .badge-business { background: var(--badge-business-bg); color: var(--badge-business-text); border-color: var(--badge-business-border); }
  .result-desc {
    width: 100%;
    font-size: 0.8rem;
    color: var(--muted-foreground);
    margin-top: 0.15rem;
    padding-top: 0.5rem;
    border-top: 1px solid var(--border);
    display: none;
  }
  .result-desc.visible { display: block; }

  /* Two-column grid */
  .grid { display: grid; grid-template-columns: 280px 1fr; gap: 1.5rem; align-items: start; }

  /* Stats */
  .stats-section {}
  .stats-title { font-size: 0.8rem; font-weight: 500; color: var(--muted-foreground); margin-bottom: 0.65rem; text-transform: uppercase; letter-spacing: 0.05em; }
  .stats-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 0.5rem; }
  .stat {
    border: 1px solid var(--border);
    border-radius: var(--radius);
    padding: 0.75rem;
    background: var(--card);
    transition: background 0.15s, border-color 0.15s;
  }
  .stat-num { font-size: 1.25rem; font-weight: 700; letter-spacing: -0.025em; }
  .stat-label { font-size: 0.7rem; color: var(--muted-foreground); margin-top: 0.1rem; }
  .stats-updated { font-size: 0.7rem; color: var(--muted-foreground); margin-top: 0.5rem; }

  /* Code block */
  .code-section { min-width: 0; }
  .code-block {
    border-radius: var(--radius);
    overflow: hidden;
    border: 1px solid var(--code-border);
    background: var(--code-bg);
  }
  .code-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    border-bottom: 1px solid var(--code-border);
    padding: 0 0.5rem 0 0;
    height: 40px;
  }
  .code-tabs { display: flex; height: 100%; }
  .code-tab {
    padding: 0 0.85rem;
    font-size: 0.8rem;
    font-weight: 450;
    font-family: inherit;
    cursor: pointer;
    background: transparent;
    border: none;
    color: var(--code-muted);
    position: relative;
    transition: color 0.15s;
    height: 100%;
    display: flex;
    align-items: center;
  }
  .code-tab:hover { color: var(--code-text); }
  .code-tab.active { color: var(--code-text); }
  .code-tab.active::after {
    content: ''; position: absolute; bottom: 0; left: 0.85rem; right: 0.85rem;
    height: 2px; background: var(--code-text); border-radius: 1px;
  }
  .copy-btn {
    display: flex; align-items: center; gap: 0.3rem;
    padding: 0.25rem 0.55rem;
    font-size: 0.7rem; font-family: inherit;
    color: var(--code-muted); background: var(--code-copy-bg);
    border: 1px solid var(--code-border); border-radius: 6px;
    cursor: pointer; transition: all 0.15s; flex-shrink: 0;
  }
  .copy-btn:hover { color: var(--code-text); background: var(--code-copy-hover); }
  .copy-btn svg { width: 12px; height: 12px; flex-shrink: 0; }
  .copy-btn.copied { color: #22c55e; border-color: #22c55e44; }
  .code-body {
    display: none;
    padding: 0.85rem 1rem;
    overflow-x: auto;
    max-height: 280px;
    overflow-y: auto;
  }
  .code-body.active { display: block; }
  .code-body pre {
    margin: 0;
    font-family: 'SF Mono', 'Fira Code', 'Cascadia Code', 'JetBrains Mono', 'Consolas', monospace;
    font-size: 0.78rem;
    line-height: 1.55;
    white-space: pre;
    color: var(--code-text);
  }

  .loading { text-align: center; padding: 2rem 0; color: var(--muted-foreground); font-size: 0.85rem; }
  .error {
    text-align: center; padding: 1.5rem; color: #ef4444;
    background: var(--card); border-radius: var(--radius); border: 1px solid var(--border);
  }

  /* Footer */
  footer {
    border-top: 1px solid var(--border);
    padding: 1rem 1.5rem;
    text-align: center;
    font-size: 0.78rem;
    color: var(--muted-foreground);
    transition: border-color 0.15s;
  }
  footer a { color: var(--foreground); text-decoration: none; font-weight: 500; }
  footer a:hover { text-decoration: underline; }

  /* Mobile */
  @media (max-width: 700px) {
    .nav { padding: 0.65rem 1rem; }
    .nav-link { display: none; }
    .main { padding: 1.5rem 1rem; }
    .hero h1 { font-size: 1.5rem; }
    .hero p { font-size: 0.85rem; }
    .grid { grid-template-columns: 1fr; gap: 1.25rem; }
    .stats-grid { grid-template-columns: repeat(4, 1fr); }
    .stat { padding: 0.6rem 0.4rem; text-align: center; }
    .stat-num { font-size: 1rem; }
    .code-body { max-height: 220px; }
  }
  @media (max-width: 420px) {
    .stats-grid { grid-template-columns: repeat(2, 1fr); }
    .result-card { padding: 0.7rem 0.85rem; }
    .copy-btn span { display: none; }
  }
</style>
</head>
<body>
<div class="page">
<nav class="nav">
  <a href="https://github.com/Rohithzr/email-provider-filter" class="nav-brand">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><polyline points="22,6 12,13 2,6"/></svg>
    Email Provider Filter
  </a>
  <div class="nav-right">
    <a href="https://github.com/Rohithzr/email-provider-filter" class="nav-link">GitHub</a>
    <a href="https://github.com/Rohithzr/email-provider-filter/releases/latest" class="nav-link">Download</a>
    <button class="theme-btn" id="theme-btn" aria-label="Toggle theme">
      <svg class="icon-sun" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>
      <svg class="icon-moon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/></svg>
    </button>
  </div>
</nav>

<main class="main">
  <div class="hero">
    <h1>Domain Lookup</h1>
    <p>Check if an email domain is disposable, free, or business</p>
  </div>

  <div class="search-wrap">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>
    <input type="text" class="search-input" id="input" placeholder="Search domain or email..." autofocus>
  </div>

  <div class="result" id="result">
    <div class="result-card">
      <img class="result-icon" id="result-icon" alt="">
      <div class="result-info">
        <div class="result-domain" id="result-domain"></div>
        <div class="result-company" id="result-company"></div>
      </div>
      <div class="result-badge" id="result-badge"></div>
    </div>
  </div>

  <div class="grid">
    <div class="stats-section" id="stats-area">
      <p class="loading">Loading dataset...</p>
    </div>
    <div class="code-section">
      <div class="code-block">
        <div class="code-header">
          <div class="code-tabs">
            <button class="code-tab active" data-lang="js">JavaScript</button>
            <button class="code-tab" data-lang="python">Python</button>
            <button class="code-tab" data-lang="php">PHP</button>
          </div>
          <button class="copy-btn" id="copy-btn">
            <svg id="copy-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></svg>
            <svg id="check-icon" style="display:none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"/></svg>
            <span id="copy-label">Copy</span>
          </button>
        </div>
        <div class="code-body active" id="panel-js"><pre id="code-js"></pre></div>
        <div class="code-body" id="panel-python"><pre id="code-python"></pre></div>
        <div class="code-body" id="panel-php"><pre id="code-php"></pre></div>
      </div>
    </div>
  </div>
</main>

<footer>
  Built by <a href="https://github.com/rohithzr">@rohithzr</a> &middot; Updated daily &middot; <a href="https://github.com/Rohithzr/email-provider-filter">Star on GitHub</a>
</footer>
</div>

<script>
(function() {
  var DATA_URL = 'https://raw.githubusercontent.com/Rohithzr/email-provider-filter/main/output/email_domains.json';
  var sets = {};
  var currentDomain = 'gmail.com';
  var currentCategory = 'free';
  var activeLang = 'js';
  var $ = function(id) { return document.getElementById(id); };

  // Theme
  function getPreferred() {
    var s = localStorage.getItem('theme');
    if (s) return s;
    return matchMedia('(prefers-color-scheme:dark)').matches ? 'dark' : 'light';
  }
  function applyTheme(t) { document.documentElement.setAttribute('data-theme', t); localStorage.setItem('theme', t); }
  applyTheme(getPreferred());
  $('theme-btn').onclick = function() {
    applyTheme(document.documentElement.getAttribute('data-theme') === 'dark' ? 'light' : 'dark');
  };

  function extractDomain(v) {
    v = v.trim().toLowerCase();
    if (v.includes('@')) v = v.split('@').pop();
    v = v.replace(/^www\./, '');
    return v.includes('.') ? v : '';
  }

  function domainToName(d) {
    var p = d.split('.');
    if (p.length > 2) {
      var l = p.slice(-2).join('.');
      if (['co.uk','com.br','com.au','co.in','co.jp','co.kr','com.mx','com.cn','com.tw','co.nz','co.za'].indexOf(l) !== -1) p = p.slice(0,-2);
      else p = p.slice(0,-1);
    } else p = p.slice(0,-1);
    return p.join(' ').replace(/\b\w/g, function(c) { return c.toUpperCase(); });
  }

  function getCategory(d) {
    if (sets.disposable && sets.disposable.has(d)) return 'disposable';
    if (sets.free && sets.free.has(d)) return 'free';
    if (sets.paid_personal && sets.paid_personal.has(d)) return 'paid_personal';
    return 'business';
  }

  var catMeta = {
    disposable: { label: 'Disposable', cls: 'badge-disposable', desc: 'Temporary/throwaway email domain' },
    free: { label: 'Free', cls: 'badge-free', desc: 'Free personal email provider' },
    paid_personal: { label: 'Paid Personal', cls: 'badge-paid', desc: 'Paid personal email service' },
    business: { label: 'Business / Unknown', cls: 'badge-business', desc: 'Not in dataset — likely a business or custom domain' }
  };

  function genJS(d, c) {
    var r = c === 'business' ? '// → not in dataset (business/custom)' : '// → "' + c + '"';
    return 'const data = await fetch("' + DATA_URL + '")\n  .then(r => r.json());\n\nconst disposable = new Set(data.domains.disposable);\nconst free = new Set(data.domains.free);\n\nfunction classify(email) {\n  const d = email.split("@").pop().toLowerCase();\n  if (disposable.has(d)) return "disposable";\n  if (free.has(d))       return "free";\n  return "business";\n}\n\nclassify("user@' + d + '");\n' + r;
  }
  function genPython(d, c) {
    var r = c === 'business' ? '# → not in dataset (business/custom)' : '# → ' + c;
    return 'import json, urllib.request\n\ndata = json.loads(urllib.request.urlopen(\n  "' + DATA_URL + '"\n).read())\n\ndisposable = set(data["domains"]["disposable"])\nfree = set(data["domains"]["free"])\n\ndef classify(email: str) -> str:\n    d = email.rsplit("@", 1)[-1].lower()\n    if d in disposable: return "disposable"\n    if d in free:       return "free"\n    return "business"\n\nclassify("user@' + d + '")\n' + r;
  }
  function genPHP(d, c) {
    var r = c === 'business' ? '// → not in dataset (business/custom)' : '// → ' + c;
    return '$data = json_decode(file_get_contents(\n  "' + DATA_URL + '"\n), true);\n\n$disposable = array_flip($data["domains"]["disposable"]);\n$free       = array_flip($data["domains"]["free"]);\n\nfunction classify(string $email): string {\n    global $disposable, $free;\n    $d = strtolower(explode("@", $email)[1]);\n    if (isset($disposable[$d])) return "disposable";\n    if (isset($free[$d]))       return "free";\n    return "business";\n}\n\nclassify("user@' + d + '");\n' + r;
  }

  function updateSnippets() {
    $('code-js').textContent = genJS(currentDomain, currentCategory);
    $('code-python').textContent = genPython(currentDomain, currentCategory);
    $('code-php').textContent = genPHP(currentDomain, currentCategory);
  }

  // Copy
  $('copy-btn').onclick = function() {
    var t = $('panel-' + activeLang).textContent;
    navigator.clipboard.writeText(t).then(function() {
      $('copy-icon').style.display = 'none';
      $('check-icon').style.display = '';
      $('copy-label').textContent = 'Copied!';
      $('copy-btn').classList.add('copied');
      setTimeout(function() {
        $('copy-icon').style.display = '';
        $('check-icon').style.display = 'none';
        $('copy-label').textContent = 'Copy';
        $('copy-btn').classList.remove('copied');
      }, 2000);
    });
  };

  function lookup(domain) {
    var el = $('result');
    if (!domain) { el.classList.remove('visible'); return; }

    $('result-domain').textContent = domain;
    el.classList.remove('visible');
    void el.offsetWidth; // reflow for animation
    el.classList.add('visible');

    var iconEl = $('result-icon');
    iconEl.classList.remove('loaded');
    iconEl.src = '';
    var img = new Image();
    img.onload = function() { iconEl.src = img.src; iconEl.classList.add('loaded'); };
    img.src = 'https://www.google.com/s2/favicons?domain=' + encodeURIComponent(domain) + '&sz=64';

    var name = domainToName(domain);
    var compEl = $('result-company');
    compEl.textContent = name && name.length > 1 ? name : '';

    var cat = getCategory(domain);
    currentDomain = domain;
    currentCategory = cat;

    var m = catMeta[cat];
    var badgeEl = $('result-badge');
    badgeEl.className = 'result-badge ' + m.cls;
    badgeEl.textContent = m.label;

    updateSnippets();
  }

  function renderStats(meta) {
    var c = meta.categories;
    var updated = new Date(meta.generated).toLocaleDateString(undefined, { year: 'numeric', month: 'short', day: 'numeric' });
    $('stats-area').innerHTML =
      '<div class="stats-title">Dataset</div>' +
      '<div class="stats-grid">' +
        '<div class="stat"><div class="stat-num">' + meta.total_domains.toLocaleString() + '</div><div class="stat-label">Total domains</div></div>' +
        '<div class="stat"><div class="stat-num">' + c.disposable.toLocaleString() + '</div><div class="stat-label">Disposable</div></div>' +
        '<div class="stat"><div class="stat-num">' + c.free.toLocaleString() + '</div><div class="stat-label">Free</div></div>' +
        '<div class="stat"><div class="stat-num">' + c.paid_personal.toLocaleString() + '</div><div class="stat-label">Paid personal</div></div>' +
      '</div>' +
      '<div class="stats-updated">Updated ' + updated + '</div>';
  }

  // Tabs
  document.querySelectorAll('.code-tab').forEach(function(tab) {
    tab.onclick = function() {
      document.querySelectorAll('.code-tab').forEach(function(t) { t.classList.remove('active'); });
      document.querySelectorAll('.code-body').forEach(function(p) { p.classList.remove('active'); });
      tab.classList.add('active');
      activeLang = tab.dataset.lang;
      $('panel-' + activeLang).classList.add('active');
    };
  });

  updateSnippets();

  (async function() {
    try {
      var resp = await fetch(DATA_URL);
      if (!resp.ok) throw new Error('HTTP ' + resp.status);
      var data = await resp.json();
      sets.disposable = new Set(data.domains.disposable);
      sets.free = new Set(data.domains.free);
      sets.paid_personal = new Set(data.domains.paid_personal);
      renderStats(data.metadata);
      updateSnippets();
      $('input').addEventListener('input', function() { lookup(extractDomain(this.value)); });
    } catch (e) {
      $('stats-area').innerHTML = '<div class="error">Failed to load dataset.<br><small>' + e.message + '</small></div>';
    }
  })();
})();
</script>
</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Email Provider Filter - Domain Lookup</title>
<style>
  :root, [data-theme="light"] {
    --bg: #ffffff;
    --bg-card: #f8f9fa;
    --text: #1a1a2e;
    --text-muted: #6c757d;
    --border: #dee2e6;
    --primary: #4361ee;
    --badge-disposable: #e63946;
    --badge-free: #2a9d8f;
    --badge-paid: #e9c46a;
    --badge-business: #457b9d;
    --input-bg: #ffffff;
    --shadow: 0 2px 8px rgba(0,0,0,0.08);
    --code-bg: #f4f4f5;
    --code-text: #18181b;
    --code-muted: #a1a1aa;
    --tab-border: #e4e4e7;
    --copy-bg: #e4e4e7;
    --copy-hover: #d4d4d8;
    --toggle-bg: #e4e4e7;
    --toggle-knob: #ffffff;
  }
  [data-theme="dark"] {
    --bg: #0d1117;
    --bg-card: #161b22;
    --text: #e6edf3;
    --text-muted: #8b949e;
    --border: #30363d;
    --primary: #58a6ff;
    --input-bg: #0d1117;
    --shadow: 0 2px 8px rgba(0,0,0,0.3);
    --code-bg: #161b22;
    --code-text: #e4e4e7;
    --code-muted: #71717a;
    --tab-border: #30363d;
    --copy-bg: #21262d;
    --copy-hover: #30363d;
    --toggle-bg: #30363d;
    --toggle-knob: #e6edf3;
  }
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, sans-serif;
    background: var(--bg);
    color: var(--text);
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 2rem 1rem;
    transition: background 0.2s, color 0.2s;
  }
  .container { max-width: 640px; width: 100%; }

  /* Header row */
  .header-row {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 0.25rem;
  }
  h1 { font-size: 1.75rem; }
  h2 { font-size: 1.2rem; margin-bottom: 0.75rem; }
  .tagline { color: var(--text-muted); margin-bottom: 2rem; font-size: 0.95rem; }

  /* Theme toggle */
  .theme-toggle {
    display: flex;
    align-items: center;
    gap: 0.4rem;
    cursor: pointer;
    -webkit-user-select: none;
    user-select: none;
  }
  .theme-toggle svg { width: 16px; height: 16px; color: var(--text-muted); }
  .toggle-track {
    width: 36px;
    height: 20px;
    background: var(--toggle-bg);
    border-radius: 999px;
    position: relative;
    transition: background 0.2s;
  }
  .toggle-knob {
    width: 16px;
    height: 16px;
    background: var(--toggle-knob);
    border-radius: 50%;
    position: absolute;
    top: 2px;
    left: 2px;
    transition: transform 0.2s;
    box-shadow: 0 1px 3px rgba(0,0,0,0.2);
  }
  [data-theme="dark"] .toggle-knob { transform: translateX(16px); }

  /* Search */
  .search-box { position: relative; margin-bottom: 1.5rem; }
  .search-box input {
    width: 100%;
    padding: 0.85rem 1rem;
    font-size: 1.1rem;
    border: 2px solid var(--border);
    border-radius: 10px;
    background: var(--input-bg);
    color: var(--text);
    outline: none;
    transition: border-color 0.2s, background 0.2s;
  }
  .search-box input:focus { border-color: var(--primary); }
  .search-box input::placeholder { color: var(--text-muted); }

  /* Result card */
  .result {
    background: var(--bg-card);
    border: 1px solid var(--border);
    border-radius: 10px;
    padding: 1.25rem;
    margin-bottom: 1.5rem;
    display: none;
    box-shadow: var(--shadow);
    transition: background 0.2s, border-color 0.2s;
  }
  .result.visible { display: block; }
  .result-header { display: flex; align-items: center; gap: 0.6rem; margin-bottom: 0.5rem; }
  .result-favicon {
    width: 32px; height: 32px; border-radius: 6px;
    flex-shrink: 0; display: none; object-fit: contain;
  }
  .result-favicon.loaded { display: block; }
  .result-domain { font-size: 1.15rem; font-weight: 600; word-break: break-all; }
  .result-company { font-size: 0.85rem; color: var(--text-muted); margin-bottom: 0.5rem; display: none; }
  .result-company.visible { display: block; }
  .badge {
    display: inline-block; padding: 0.2rem 0.65rem; border-radius: 999px;
    font-size: 0.8rem; font-weight: 600; color: #fff;
  }
  .badge-disposable { background: var(--badge-disposable); }
  .badge-free { background: var(--badge-free); }
  .badge-paid { background: var(--badge-paid); }
  .badge-business { background: var(--badge-business); }
  .result-desc { color: var(--text-muted); font-size: 0.9rem; margin-top: 0.4rem; }

  /* Stats */
  .stats {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 0.75rem;
    margin-bottom: 2rem;
  }
  .stat-card {
    background: var(--bg-card); border: 1px solid var(--border);
    border-radius: 10px; padding: 1rem; text-align: center;
    box-shadow: var(--shadow); transition: background 0.2s, border-color 0.2s;
  }
  .stat-card .num { font-size: 1.35rem; font-weight: 700; }
  .stat-card .label { font-size: 0.78rem; color: var(--text-muted); margin-top: 0.2rem; }

  /* Code block */
  .snippets { margin-bottom: 2rem; }
  .code-block {
    border-radius: 10px; overflow: hidden;
    border: 1px solid var(--tab-border);
    transition: border-color 0.2s;
  }
  .code-header {
    display: flex; align-items: center; justify-content: space-between;
    background: var(--code-bg); border-bottom: 1px solid var(--tab-border);
    padding: 0; transition: background 0.2s;
  }
  .code-tabs { display: flex; gap: 0; padding: 0; overflow-x: auto; }
  .code-tab {
    padding: 0.55rem 1rem; font-size: 0.8rem; font-weight: 500;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    cursor: pointer; background: transparent; border: none;
    color: var(--code-muted); position: relative; transition: color 0.15s;
    white-space: nowrap;
  }
  .code-tab:hover { color: var(--code-text); }
  .code-tab.active { color: var(--code-text); }
  .code-tab.active::after {
    content: ''; position: absolute; bottom: 0; left: 0; right: 0;
    height: 2px; background: var(--primary);
  }
  .copy-btn {
    display: flex; align-items: center; gap: 0.35rem;
    padding: 0.35rem 0.7rem; margin-right: 0.5rem;
    font-size: 0.75rem;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    color: var(--code-muted); background: var(--copy-bg);
    border: 1px solid var(--tab-border); border-radius: 6px;
    cursor: pointer; transition: all 0.15s; white-space: nowrap;
  }
  .copy-btn:hover { color: var(--code-text); background: var(--copy-hover); }
  .copy-btn svg { width: 14px; height: 14px; flex-shrink: 0; }
  .copy-btn.copied { color: #22c55e; }
  .code-body {
    display: none; background: var(--code-bg);
    padding: 1rem 1.15rem; overflow-x: auto;
    transition: background 0.2s;
  }
  .code-body.active { display: block; }
  .code-body pre {
    margin: 0;
    font-family: 'SF Mono', 'Fira Code', 'Cascadia Code', 'Consolas', monospace;
    font-size: 0.8rem; line-height: 1.6; white-space: pre;
    color: var(--code-text);
  }

  .loading { text-align: center; padding: 3rem 0; color: var(--text-muted); }
  .error {
    text-align: center; padding: 2rem; color: var(--badge-disposable);
    background: var(--bg-card); border-radius: 10px; border: 1px solid var(--border);
  }
  footer {
    margin-top: auto; padding-top: 2rem; text-align: center;
    font-size: 0.85rem; color: var(--text-muted);
  }
  footer a { color: var(--primary); text-decoration: none; }
  footer a:hover { text-decoration: underline; }

  /* Responsive */
  @media (max-width: 480px) {
    body { padding: 1.25rem 0.75rem; }
    h1 { font-size: 1.35rem; }
    .tagline { font-size: 0.85rem; margin-bottom: 1.25rem; }
    .search-box input { font-size: 1rem; padding: 0.75rem 0.85rem; }
    .stats { grid-template-columns: repeat(2, 1fr); gap: 0.5rem; }
    .stat-card { padding: 0.75rem 0.5rem; }
    .stat-card .num { font-size: 1.1rem; }
    .stat-card .label { font-size: 0.7rem; }
    .result { padding: 1rem; }
    .result-domain { font-size: 1rem; }
    .code-tab { padding: 0.5rem 0.7rem; font-size: 0.75rem; }
    .copy-btn { padding: 0.3rem 0.5rem; font-size: 0.7rem; }
    .copy-btn span { display: none; }
    .code-body { padding: 0.75rem; }
    .code-body pre { font-size: 0.7rem; }
    h2 { font-size: 1.05rem; }
  }
</style>
</head>
<body>
<div class="container">
  <div class="header-row">
    <h1>Email Provider Filter</h1>
    <div class="theme-toggle" id="theme-toggle" role="button" aria-label="Toggle dark mode" tabindex="0">
      <svg id="icon-sun" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>
      <div class="toggle-track"><div class="toggle-knob"></div></div>
      <svg id="icon-moon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/></svg>
    </div>
  </div>
  <p class="tagline">148,000+ email domains classified as disposable, free, or paid</p>

  <div class="search-box">
    <input type="text" id="input" placeholder="Enter email or domain (e.g. user@gmail.com)" autofocus>
  </div>

  <div class="result" id="result">
    <div class="result-header">
      <img class="result-favicon" id="result-favicon" alt="">
      <div class="result-domain" id="result-domain"></div>
    </div>
    <div class="result-company" id="result-company"></div>
    <div id="result-badge"></div>
    <div class="result-desc" id="result-desc"></div>
  </div>

  <div id="stats-area">
    <p class="loading" id="loading">Loading dataset...</p>
  </div>

  <div class="snippets">
    <h2>Use in your project</h2>
    <div class="code-block">
      <div class="code-header">
        <div class="code-tabs">
          <button class="code-tab active" data-lang="js">JavaScript</button>
          <button class="code-tab" data-lang="python">Python</button>
          <button class="code-tab" data-lang="php">PHP</button>
        </div>
        <button class="copy-btn" id="copy-btn">
          <svg id="copy-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></svg>
          <svg id="check-icon" style="display:none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"/></svg>
          <span id="copy-label">Copy</span>
        </button>
      </div>
      <div class="code-body active" id="panel-js"><pre id="code-js"></pre></div>
      <div class="code-body" id="panel-python"><pre id="code-python"></pre></div>
      <div class="code-body" id="panel-php"><pre id="code-php"></pre></div>
    </div>
  </div>
</div>

<footer>
  <p>Data from <a href="https://github.com/Rohithzr/email-provider-filter">email-provider-filter</a> &middot; Updated daily</p>
</footer>

<script>
(function() {
  var DATA_URL = 'https://raw.githubusercontent.com/Rohithzr/email-provider-filter/main/output/email_domains.json';
  var sets = {};
  var currentDomain = 'gmail.com';
  var currentCategory = 'free';
  var activeLang = 'js';

  var $ = function(id) { return document.getElementById(id); };

  // Theme
  function getPreferred() {
    var saved = localStorage.getItem('theme');
    if (saved) return saved;
    return window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
  }
  function applyTheme(t) {
    document.documentElement.setAttribute('data-theme', t);
    localStorage.setItem('theme', t);
  }
  applyTheme(getPreferred());

  $('theme-toggle').addEventListener('click', function() {
    var current = document.documentElement.getAttribute('data-theme');
    applyTheme(current === 'dark' ? 'light' : 'dark');
  });
  $('theme-toggle').addEventListener('keydown', function(e) {
    if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); this.click(); }
  });

  function extractDomain(input) {
    input = input.trim().toLowerCase();
    if (input.includes('@')) input = input.split('@').pop();
    input = input.replace(/^www\./, '');
    if (!input.includes('.')) return '';
    return input;
  }

  function domainToName(domain) {
    var parts = domain.split('.');
    if (parts.length > 2) {
      var last2 = parts.slice(-2).join('.');
      var shortSLDs = ['co.uk','com.br','com.au','co.in','co.jp','co.kr','com.mx','com.cn','com.tw','co.nz','co.za'];
      if (shortSLDs.indexOf(last2) !== -1) parts = parts.slice(0, -2);
      else parts = parts.slice(0, -1);
    } else {
      parts = parts.slice(0, -1);
    }
    var name = parts.join(' ');
    return name.replace(/\b\w/g, function(c) { return c.toUpperCase(); });
  }

  function getCategory(domain) {
    if (sets.disposable && sets.disposable.has(domain)) return 'disposable';
    if (sets.free && sets.free.has(domain)) return 'free';
    if (sets.paid_personal && sets.paid_personal.has(domain)) return 'paid_personal';
    return 'business';
  }

  function categoryLabel(cat) {
    return { disposable: 'disposable', free: 'free', paid_personal: 'paid_personal', business: 'business' }[cat] || 'business';
  }

  function genJS(domain, cat) {
    var comment = cat === 'business'
      ? '// Result: not in dataset (business/custom domain)'
      : '// Result: "' + categoryLabel(cat) + '"';
    return 'const resp = await fetch(\n  "' + DATA_URL + '"\n);\nconst data = await resp.json();\n\nconst disposable = new Set(data.domains.disposable);\nconst free = new Set(data.domains.free);\n\nfunction classify(email) {\n  const domain = email.split("@").pop().toLowerCase();\n  if (disposable.has(domain)) return "disposable";\n  if (free.has(domain))       return "free";\n  return "business";\n}\n\nconsole.log(classify("user@' + domain + '"));\n' + comment;
  }

  function genPython(domain, cat) {
    var comment = cat === 'business'
      ? '# Result: not in dataset (business/custom domain)'
      : '# Result: ' + categoryLabel(cat);
    return 'import json, urllib.request\n\ndata = json.loads(urllib.request.urlopen(\n    "' + DATA_URL + '"\n).read())\n\ndisposable = set(data["domains"]["disposable"])\nfree = set(data["domains"]["free"])\n\ndef classify(email: str) -> str:\n    domain = email.rsplit("@", 1)[-1].lower()\n    if domain in disposable:\n        return "disposable"\n    if domain in free:\n        return "free"\n    return "business"\n\nprint(classify("user@' + domain + '"))\n' + comment;
  }

  function genPHP(domain, cat) {
    var comment = cat === 'business'
      ? '// Result: not in dataset (business/custom domain)'
      : '// Result: ' + categoryLabel(cat);
    return '$json = file_get_contents(\n    "' + DATA_URL + '"\n);\n$data = json_decode($json, true);\n\n$disposable = array_flip($data["domains"]["disposable"]);\n$free       = array_flip($data["domains"]["free"]);\n\nfunction classify(string $email): string {\n    global $disposable, $free;\n    $domain = strtolower(explode("@", $email)[1]);\n    if (isset($disposable[$domain])) return "disposable";\n    if (isset($free[$domain]))       return "free";\n    return "business";\n}\n\necho classify("user@' + domain + '");\n' + comment;
  }

  function updateSnippets() {
    $('code-js').textContent = genJS(currentDomain, currentCategory);
    $('code-python').textContent = genPython(currentDomain, currentCategory);
    $('code-php').textContent = genPHP(currentDomain, currentCategory);
  }

  function getActiveCode() {
    var panel = $('panel-' + activeLang);
    return panel ? panel.textContent : '';
  }

  $('copy-btn').addEventListener('click', function() {
    var code = getActiveCode();
    navigator.clipboard.writeText(code).then(function() {
      $('copy-icon').style.display = 'none';
      $('check-icon').style.display = '';
      $('copy-label').textContent = 'Copied!';
      $('copy-btn').classList.add('copied');
      setTimeout(function() {
        $('copy-icon').style.display = '';
        $('check-icon').style.display = 'none';
        $('copy-label').textContent = 'Copy';
        $('copy-btn').classList.remove('copied');
      }, 2000);
    });
  });

  function lookup(domain) {
    var el = $('result');
    var domEl = $('result-domain');
    var badgeEl = $('result-badge');
    var descEl = $('result-desc');
    var faviconEl = $('result-favicon');
    var companyEl = $('result-company');

    if (!domain) { el.classList.remove('visible'); return; }

    domEl.textContent = domain;
    el.classList.add('visible');

    faviconEl.classList.remove('loaded');
    faviconEl.src = '';
    var img = new Image();
    img.onload = function() {
      faviconEl.src = img.src;
      faviconEl.classList.add('loaded');
    };
    img.src = 'https://www.google.com/s2/favicons?domain=' + encodeURIComponent(domain) + '&sz=32';

    var company = domainToName(domain);
    if (company && company.length > 1) {
      companyEl.textContent = company;
      companyEl.classList.add('visible');
    } else {
      companyEl.classList.remove('visible');
    }

    var cat = getCategory(domain);
    currentDomain = domain;
    currentCategory = cat;
    updateSnippets();

    if (cat === 'disposable') {
      badgeEl.innerHTML = '<span class="badge badge-disposable">Disposable</span>';
      descEl.textContent = 'This is a temporary/throwaway email domain. Likely used to bypass signups.';
    } else if (cat === 'free') {
      badgeEl.innerHTML = '<span class="badge badge-free">Free</span>';
      descEl.textContent = 'This is a free personal email provider (e.g. Gmail, Yahoo).';
    } else if (cat === 'paid_personal') {
      badgeEl.innerHTML = '<span class="badge badge-paid">Paid Personal</span>';
      descEl.textContent = 'This is a paid personal email service (e.g. Hey, Fastmail).';
    } else {
      badgeEl.innerHTML = '<span class="badge badge-business">Business / Unknown</span>';
      descEl.textContent = 'Not in our dataset. Likely a business or custom domain.';
    }
  }

  function renderStats(meta) {
    var c = meta.categories;
    var total = meta.total_domains.toLocaleString();
    var updated = new Date(meta.generated).toLocaleDateString(undefined, { year: 'numeric', month: 'short', day: 'numeric' });

    $('stats-area').innerHTML =
      '<div class="stats">' +
        '<div class="stat-card"><div class="num">' + total + '</div><div class="label">Total Domains</div></div>' +
        '<div class="stat-card"><div class="num">' + c.disposable.toLocaleString() + '</div><div class="label">Disposable</div></div>' +
        '<div class="stat-card"><div class="num">' + c.free.toLocaleString() + '</div><div class="label">Free</div></div>' +
        '<div class="stat-card"><div class="num">' + c.paid_personal.toLocaleString() + '</div><div class="label">Paid Personal</div></div>' +
      '</div>' +
      '<p style="text-align:center;font-size:0.82rem;color:var(--text-muted);">Last updated: ' + updated + '</p>';
  }

  document.querySelectorAll('.code-tab').forEach(function(tab) {
    tab.addEventListener('click', function() {
      document.querySelectorAll('.code-tab').forEach(function(t) { t.classList.remove('active'); });
      document.querySelectorAll('.code-body').forEach(function(p) { p.classList.remove('active'); });
      tab.classList.add('active');
      activeLang = tab.dataset.lang;
      $('panel-' + activeLang).classList.add('active');
    });
  });

  updateSnippets();

  async function init() {
    try {
      var resp = await fetch(DATA_URL);
      if (!resp.ok) throw new Error('HTTP ' + resp.status);
      var data = await resp.json();

      sets.disposable = new Set(data.domains.disposable);
      sets.free = new Set(data.domains.free);
      sets.paid_personal = new Set(data.domains.paid_personal);

      renderStats(data.metadata);
      updateSnippets();

      $('input').addEventListener('input', function() {
        lookup(extractDomain(this.value));
      });
    } catch (e) {
      $('stats-area').innerHTML = '<div class="error">Failed to load dataset. <br><small>' + e.message + '</small></div>';
    }
  }

  init();
})();
</script>
</body>
</html>
